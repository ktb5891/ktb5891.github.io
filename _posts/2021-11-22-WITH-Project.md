---
title: "수소차 충전소 입지 선정 및 안내 웹 서비스"
author: Kwak Tae Beom
date: 2021-11-22 13:01:00 +0900
categories: [project]
tags: [Global IT 인재교육원, python, jupyter notebook, machine learning, Sufil, Hackerton]
---

# Where Is The Hydrogen Station?

## 1. 서론

### 프로젝트 필요성 및 목적

2019년에 발생한 '코로나바이러스 감염증(이하 코로나)’으로 인해 경제·사회 전반의 구조적 변화가 초래되었고, 지난해 7월 정부는 디지털 및 그린 경제로의 전환을 양 축으로 하는 한국판 뉴딜 정책을 발표했다(「한국판 뉴딜」종합계획, 2020). 그 중 ’그린 경제로의 전환‘은 국민 삶의 질을 개선하면서도 일자리 및 신산업을 창출할 기회를 제공하기 때문에 필수적이다. 

그러나 현재 한국은 지리적 여건 등으로 청정에너지의 생산 수준이 낮고, 전반적인 산업 생태계가 탄소 의존적이기 때문에 급작스러운 환경 규제와 기준 강화 시 국내 제조업의 이탈 가능성이 크다. 따라서 전기차·수소차 등의 그린 모빌리티 인프라 구축을 통한 저탄소·분산형 에너지를 확산하는 것이 필요하다.

특히, 국제에너지기구(IEA)가 2050년에 가장 유망한 신재생 에너지로 ‘수소’를 선정할 만큼, 수소는 인류가 무한하게 생산할 수 있는 청정 에너지원이다. 수소를 새로운 에너지원으로 이용하기 위해서는 안전 정책과 제도뿐만 아니라 인적·물적 자원, 수소 생산 및 운송 관련 인프라 개발이 선행되어야 한다. 

[그림 I-1] <글로벌 수소차 보급 및 수소충전소 구축 현황>에서 주지하듯 대한민국은 약 12,000대의 수소 차량이 보급되어 수소차 보급률 세계 1위의 수준을 기록했으나,  수소충전소는 69개로 수소차 180대당 충전소 1대로 세계 최하위 2위를 기록했다(한국자동차산업협회, 2021). 즉, 수소차는 전기차보다 충전이 빠르고 주행 가능 거리가 멀어 보급량이 증가하고 있으나, 충전소가 현저히 적고 인프라 구축을 위한 정책, 논문 등 선행 연구가 충분하지 않다. 따라서 수소차 충전소를 구축하기 위한 최적의 입지를 선정하기 위해 빅 데이터를 활용하고, 구축한 충전소에 대한 정보를 웹(가칭 WITH, Where Is The H2 fueling station)으로 서비스하여 그린 모빌리티를 확대하고자 한다.

![image01](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image01.png?raw=true){: width="800"}
*[그림 I-1] 글로벌 수소차 보급 및 수소충전소 구축 현황*

### 프로젝트 방법 및 프로젝트 추진 절차

#### 수소 충전소의 생산 방식

수소차 충전을 위한 수소 생산 방식은 공급 형태에 따라 외부에서 수소를 생산하는 중앙공급(off-site) 방식과 자체에서 수소를 생산하는 현지공급(on-site)으로 나뉜다. 현지공급방식은 상대적으로 적은 투자비와 운송비용의 경제성으로 수소 초기 시장에서 사용할 수 있으나, 현지공급방식에서 사용하는 개질기는 구조적·경제적 문제로 때문에 한번 가동하면 중지가 어렵다는 고질적인 단점이 있어, 현재 대한민국의 충전소 형태는 대부분 중앙공급 형태로, 석유화학단지에서 생산되는 부생 수소를 이용한다. 따라서 중앙공급 형태의 수소 충전소를 구축한다고 가정한다. 

#### 머신러닝(Machine Learning) 분석 방법론

다양한 변수의 데이터를 고려하여 수소차 충전소의 입지를 선정하기 위해서는 기계 스스로 데이터를 기반으로 패턴을 학습하고 결과를 예측하는 머신러닝 방법론을 사용해야 한다. 머신러닝은 알고리즘에 주입하는 훈련 데이터인 레이블(Label)의 포함 여부에 따라 지도 학습(supervised learning)과 비지도 학습(unsupervised learning)으로 나뉜다. 본 프로젝트에서는 별도의 레이블을 포함하고 있지 않기 때문에 비지도 학습 중 군집화를 사용하여 다차원의 변수를 고려하여 비슷한 특징을 가진 입지를 묶고, 최적의 입지를 선정하고자 한다. 

군집화 알고리즘 중 평균이동(Meanshift) 알고리즘, GMM(Gaussian Mixture Model) 알고리즘, DBSCAN(Density Based Spatial Clustering of Applications with Noise) 알고리즘 등의 밀도 기반 알고리즘을 사용할 경우, 군집 수가 매우 적어지고 정확도가 떨어지는 단점이 존재한다. 따라서 본 프로젝트에서는 PCA(Principal Component Analysis) 차원 축소를 이용하여 다차원의 변수를 축소하고, 군집 중심점(centroid)이라는 특정한 임의의 지점을 선택해 해당 중심에 가장 가까운 포인트들을 선택하는 군집화 기법인 K-평균(K-means) 알고리즘을 사용하는 것이 가장 적합하다고 판단하였다.

#### 프로젝트 추진 절차

데이터 분석을 통해 알고리즘을 구축하여 수소차 충전소의 입지 선정 및 웹으로 구현하여 서비스하기 위해 본 프로젝트는 [그림 Ⅰ-2] <프로젝트 추진 절차>에 제시한 바와 같이 진행하였다. 프로젝트의 효율적인 진행을 위해 데이터 분석과 웹 구현으로 나눠 업무를 분장하여 단계적 절차 없이 포괄적으로 수행하고 프로젝트 결과를 종합하였으며, 예측 모델을 제시하였다.

![image02](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image02.png?raw=true){: width="800"}
*[그림 Ⅰ- 2] 프로젝트 추진 절차*


## 2. 데이터 수집

### 데이터 수집 범위

경기도는 2,372대의 수소 차량이 등록되어 있어 전국에서 가장 많은 수소 차량이 등록된 지역이나, 충전소 개수는 6개에 불과하다. 또한, 머신 러닝을 기반으로 한 서울시 수소 충전소 입지 선정에 관한 연구는 선행되어있기 때문에(Kim and Ryu, 2020), 수소 충전소 설치가 시급한 경기도를 선정하여 웹 사이트 구축하고 시범 운행하고자 한다. 현재 경기 남부 중 평택, 안산, 인천 등에 수소 생산 기지가 설치되었거나, 설치될 예정이기 때문에 지역을 경기 남부(과천시, 광명시, 광주시, 군포시, 김포시, 부천시, 성남시, 수원시, 시흥시, 안산시, 안성시, 안양시, 양평군, 여주시, 오산시, 용인시, 의왕시, 이천시, 평택시, 하남시, 화성시 21개 도시)로 한정하여 수소 충전소 입지를 분석하고, 구축된 머신러닝 모델을 추후 전국으로 확대하고자 한다.

![image03](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image03.png?raw=true){: width="800"}
*[그림 II-1] 경기 남부 지도*

데이터 분석을 위해 2020년의 표준 공시지가, 자동차 주행거리, 총 인구수 데이터를 공공 데이터 포털 및 국가통계 포털에서 웹 스크래핑을 이용하여 수집하고, 수소차 보급 대수와 경향을 파악하기 위해 경기도 시별 담당 부서에 직접 전화하여 최근 3개년 데이터에 대해 문의하였다. 또한, 2021년 7월 현재 존재하거나 곧 설립 예정인 수소 생산지로부터 충전소 위치 후보까지의 거리 데이터를 네이버 지도를 이용하여 도출하였다.

### 데이터 수집

#### 공시지가

2020년 표준 공시지가 데이터에서 부지면적, 면적당 공시지가 변수들을 추출하여 총 공시지가를 산출하였고, 도로 측면코드를 추출하여 도로 접근성을 고려하여 군집화를 실시하고자 했다.

![image04](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image04.png?raw=true){: width="800"}
*[그림 II-2] 공시지가 데이터*

#### 총 인구수

2020년 주민등록 인구 및 세대현황 데이터에서 각 시도별 총 인구수를 추출하였다.

![image05](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image05.png?raw=true){: width="800"}
*[그림 II-3] 총 인구수 데이터*

#### 1일 자동차 평균 주행거리

경기도의 자동차 주행거리 데이터에서 2019년도의 일일 평균 주행 거리를 변수로 추정하였다. 데이터 수집의 한계로 2020년의 데이터를 구할 수 없어 2018년도와 2019년도의 평균 주행 거리가 유사함에 따라 2020년도 주행거리도 유사할 것으로 판단하였다.

![image06](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image06.png?raw=true){: width="800"}
*[그림 II-4] 자동차 주행거리 데이터*

#### 수소차 보급 대수

수소차 보급 대수는 경기도 시별 담당 부서에 직접 전화 문의하여 최근 3개년, 2019년부터 2021년도 7월까지의 수소차 보급 현황을 수집하였다. 3개년의 수소차 보급 대수를 바탕으로 추후 수소차 보급 현황을 추정하고자 하였다.

![image07](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image07.png?raw=true){: width="800"}
*[그림 II-5] 수소차 보급대수 데이터*

## 3. 데이터 전처리

### 이상치 처리

데이터 전처리란 수집 데이터 중 분석 결과나 모델 성능에 악영향을 미칠 수 있는 값을 가공하는 작업을 의미한다. 즉, 원활한 데이터 분석을 위해 데이터 자체 혹은 수집 과정에서 발생한 오류를 데이터 전처리 과정을 통해 정제하는 것이다. 

원본 데이터에서 결측치가 발견되지 않았기 때문에 따로 결측치를 처리하는 과정은 거치지 않았다. 이상치를 처리하는 과정에 있어서 사용한 프로그래밍 언어는 ‘Python’을 사용하여 ‘Jupyter Notebook’에서 구현했으며, ‘Excel’의 함수를 사용하여 전처리를 진행하였다.

### 필요 데이터 추출

본 프로젝트에서는 표준 공시지가 데이터에서 ‘지목 코드’를 사용하여 주유소 용지만을 추출한 후 필요한 변수인 ‘법정동명’, ‘도로 측면코드’, ‘토지면적’, ‘공시지가’, ‘주소’, 피처(feature)만을 추출했다. 추출한 데이터에 ‘자동차 주행거리’, ‘총인구수’, ‘수소차 보급 대수’ 데이터를 ‘Python’의 Pandas 모듈의 함수를 사용하여 데이터를 취합했다. 또한, 네이버 지도를 활용하여 ‘수소 생산 시설로부터의 거리’를 산출하고, 기존의 수소차 보급 대수를 활용하여 ‘2025년도까지의 누적 보급 대수’를 산출을 하는 과정을 거쳤다.


#### 수소 생산 시설로부터의 거리 산출

네이버 지도를 이용해 현재 존재하고 있는 안산, 평택 수소 생산기지 또한 2021년에 완공 목표인 화성 충전기지로부터 부지 후보 주소까지의 소요 거리와 소요 시간을 산출하였다. 그 중의 가장 가까운 거리를 도출하여, ‘수소 생산 시설로부터의 거리’ 변수로 고려하였다.

#### 2025년도까지의 수소차 누적 보급 대수 산출

경기도 남부의 시별 담당 부서에 전화 문의하여 수집한 2019 ~ 2021년 7월까지의 수소차 보급 대수 데이터를 토대로 2025년도까지의 누적 보급 대수를 산출했다. 먼저 2021년 전체의 보급 대수 예측을 수식을 통해 도출한 뒤, 기존 데이터의 증감 경향을 파악하여 2022년도의 예상 보급 대수를 도출했다. 이와 같이 2022년부터 2025년까지의 예상 보급 대수를 산정한 후, 수소차가 보급되기 시작한 2019년도부터 2025년도까지의 누적 합을 산출하였다.


## 4. 데이터 분석

### 필요 라이브러리 및 함수 호출

Python'을 사용하여 분석을 용이하게 하기 위해  ‘Pandas', 'Numpy' 라이브러리를 사용하였고, 전처리된 데이터를 분석하는 여러 기법 중 군집화를 위한 'sklearn'의 'StandardScaler', 'K-Means', 'PCA', 'Silhouette_score', 'Silhouette_samples' 라이브러리를 사용하였다. 분석한 결과를 시각화하기 위해 그래프와 지도를 불러올 수 있는 ‘matplotlib', 'Folium' 라이브러리를 사용하여, 총 9개의 라이브러리를 불러(import)왔다.

![image08](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image08.png?raw=true){: width="800"}
*[그림 Ⅳ-1] Python 라이브러리 사용*

### 데이터 탐색

정제한 데이터를 데이터 분석 구현 환경에 가져온다. 한글을 Python에서 구현하기 위해 CP949 코드를 이용하여 인코딩하고 ‘standard1’ 이라는 변수명으로 저장한다.

수소차 충전소 입지 선정 분석을 위해 필요한 변수(Feature)를 이전 데이터 전처리 과정에서 Excel과 Python을 이용하여 정제하였다. 따라서, 데이터 분석 단계에서는 추가 데이터 처리 없이 분석을 시행한다.

군집화 대상인 변수의 데이터 형태를 파악하고 실제 군집화에 필요한 변수인 ‘도로 측면코드’, ‘토지면적’, ‘공시지가’, ‘각 시도별 총인구수’, ‘2020년 수소차 등록 대수’, ‘2025년 예상 수소차 누적 보급 대수’, ‘각 수소 생산기지로부터의 거리’를 추출하여 standard_df를 변수명으로 저장한다.

![image09](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image09.png?raw=true){: width="800"}
*[그림 Ⅳ-4] standard_df를 나타낸 DataFrame*

각 변수의 값의 편차가 크기 때문에 큰 값을 지닌 변수가 군집(cluster)을 형성할 때 더 큰 영향을 줄 수 있다. 이를 해결하기 위해 Standard_Scaler 라이브러리를 이용한 피처 스케일링(Feature Scaling, 각 변수의 단위를 0~1 사이, 혹은 상대적 값을 표현할 수 있는 수치로 변경하는 것)을 시행한다.

![image10](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image10.png?raw=true){: width="800"}
*[그림 Ⅳ-5] 피처 스케일링 후의 변숫값*

다차원 변수(9개)를 2개의 변수로 줄여서 데이터를 좀 더 잘 설명할 수 있는 잠재적인 요소를 추출하고 직관적인 데이터 해석을 하기 위해 앞에서 호출한 PCA 라이브러리를 사용하여 차원축소를 진행하였다.


### 군집화

수집한 데이터를 고려하여 비지도 학습 모델은 군집화 중에서도 가장 보편적으로 사용하며 구현이 쉬운 K-means 알고리즘을 사용했다. 군집화에서는 적절한 실루엣 계수를 사용하는 것이 모델의 성능을 많이 결정하기 때문에 적절한 실루엣 계수를 판단할 수 있도록 시각화하여 볼 수 있는 함수인 ‘visualize_kmeans_plot_multi’, ‘visualize_silhouette' 함수를 호출하여 사용했다.

![image11](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image11.png?raw=true){: width="800"}
*[그림 Ⅳ-7] visualize_kmeans_plot_multi 함수 사용*

![image12](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image12.png?raw=true){: width="800"}
*[그림 Ⅳ-8] visualize_silhouette 함수 사용*

![image13](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image13.png?raw=true){: width="800"}
*[그림 Ⅳ-9] 실루엣 계수 및 군집화 결과 확인*

군집화를 시행하기 전 적절한 실루엣 계수를 도출하기 위하여 앞에서 불러온 함수를 사용하여 정규화한 데이터에 대한 실루엣 계수와 군집화 결과를 시각화한다.

[그림 Ⅳ-9] <실루엣 계수 및 군집화 결과 확인>을 통해 주지하듯 cluster 값을 3으로 했을 경우 Silhouette Score(변수들의 실루엣 계수 평균)가 0.425로 가장 높게 나타난다. 하지만 cluster를 3 이상으로 선정하는 것이 단일 지역에 함몰되지 않고 다양한 변수를 고려할 수 있다고 판단하여 cluster 값을 5로 설정하였다.


### 데이터 시각화 및 분석

군집화를 통해 5개의 군집으로 분류된 데이터들을 지도에 시각화한 결과는 다음과 같다. 

각 군집(cluster)별로 0은 빨간색을 1은 노란색, 2는 초록색, 3은 파란색, 4는 보라색으로 시각화한 결과를 토대로 수익성과 형평성으로 이원화하여 상위 군집을 선택했다. 첫 번째는 수익성, 경제성을 고려하여 상위 군집을 선정하였으며, 두 번째는 소외지역을 고려하여 상위 군집을 선정하였다.

![image14](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image14.png?raw=true){: width="800"}
*[그림 Ⅳ-11] 각 군집별 지도에 시각화*

각 사례별 상위 군집을 선정하기 위해서 탐색 데이터 변수에 군집화 결괏값인 kmeans.labels_값을 추가하였다.

각 군집 별로 데이터의 변수 평균값을 구한 후, 5개의 군집을 1~5점의 점수를 매겨 순위를 산정했다.(단, ‘도로 측면코드’, ‘공시지가’, ‘각 생산 기지별 거리’ 변수는 평균값이 낮을수록 상위 군집의 조건이라고 판단하여 역순으로 점수를 부여하였다.)

이상의 기준으로 선정된 상위 군집을 다시 시각화하였다.

![image15](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image15.png?raw=true){: width="800"}
*[그림 Ⅳ-14] 수익성, 경제성을 고려한 상위 군집 시각화*

![image16](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image16.png?raw=true){: width="800"}
*[그림 Ⅳ-15] 소외지역을 고려한 상위 군집 시각화*

[그림 Ⅳ-14] <수익성, 경제성을 고려한 상위 군집 시각화>와 [그림 Ⅳ-15] <소외지역을 고려한 상위 군집 시각화>에서 나타나듯 인접한 부지에 다수의 충전소 입지가 선정되었기 때문에 각 부지 후보별최대의 이윤을 고려하기 위한 수식을 세워, 다수의 충전소 중 최적의 입지를 선정하였다.

![image17](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image17.png?raw=true){: width="800"}
*[그림 Ⅳ-16] 이윤 계산을 위한 수식*

선정된 다수의 수소차 충전소에서 최대의 이윤을 계산할 수 있는 수식을 세워 2020년, 2025년도의 이윤을 계산하여 두 값의 차이를 확인했다. 그 결과, 2025년의 이윤에서 2020년의 이윤의 값의 차이가 모두 양수로 향후 수소차 보급이 활성화된다면 수소차 충전소가 수익성을 가질 수 있음이 입증되었다.

최종적으로 군집별 시각화와 수식을 토대로 인접한 구 혹은 동에 해당하는 충전소의 공시지가를 비교하여 상대적으로 저렴한 부지를 최종 입지로 선정했다.


## 5. 웹 구현

### 기존 웹 사이트와의 차별성

본 프로젝트에서의 웹 개발은 기존의 수소 충전소 위치 표기 사이트의 한계점을 보완하기 위하여 진행되었다. 현재 운영되고 있는 ‘저공해차 누리집’ 웹 사이트는 수소 충전소를 찾을 수 있는 기능과 저공해차에 대한 정보를 제공하는 것을 주로 서비스하고 있다. 한편, 수소차 보급률을 증가시키고, 이용자들의 편의를 도모하는 것을 주된 목적으로 하는 본 프로젝트의 웹 사이트는 ‘수소차 소유자’를 주로 타겟팅하여 ‘최적의 수소 충전소 입지 선정’ 및 ‘수소차 충전소 길 찾기’를 주된 기능으로 한다. 기존의 ‘저공해차 누리집’ 사이트가 단편적인 위치만 보여줄 뿐이라면, 본 프로젝트의 웹 사이트는 사용자의 현재 위치를 파악하여 가장 가까운 수소차의 위치까지 경로를 안내하는 ‘내비게이션 기능’이 탑재되어 있다. 또한, 실시간으로 현재 충전소의 상태를 표시하고, 충전까지의 시간을 안내하여 사용자의 편의를 도모할 수 있도록 개발하였다.

### 웹 사이트의 기능

#### 지도 시각화

지도 시각화는 마커(Marker), 정보 창(Info Window), 폴리 라인(Poly-Line)의 세 가지 기능을 제공하여, 출발지에 대한 정보를 제공하면서도, 출발지와 도착지, 경로 등에 대한 가시성을 높여 직관적으로 이해할 수 있도록 한다.

첫째, 마커는 지도에서 위치를 표시하는 아이콘을 의미한다. 마커가 나타내는 위치는 ‘기존 수소 충전소의 위치’, ‘선정된 새로운 충전소의 위치’, ‘출발지 위치’를 표시한다. 이때, 세 가지의 위치 마커를 다르게 표시하여 사용자가 마커의 모양만으로 해당 위치가 충전소인지, 출발지인지 구분할 수 있게 한다.

둘쨰, 정보창은 사용자가 원하는 출발지 위치의 정보를 제공한다. 사용자가 지도상에서 원하는 위치를 클릭하면 정보창이 뜬다. 정보창에는 해당 위치의 위도, 경도 데이터를 제공하며, ‘출발지’ 버튼을 누르면 해당 위치를 출발지로 지정한다.

![image18](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image18.png?raw=true){: width="800"}
*[그림 Ⅴ-2] 지도상의 마커, 폴리 라인, 정보 창 이미지*

셋째, 폴리 라인은 사용자가 지정한 출발지와 도착지(출발지와 직선거리가 가장 가까운 충전소) 간 경로를 보여준다. 폴리 라인을 통해 사용자는 이동 경로에 대해 빠르고 직관적으로 이해할 수 있다.

#### 길 찾기

‘도착지 자동 지정’, ‘충전소 카테고리 선택’, ‘당일 충전 요금 및 대기 시간 정보 제공’의 3가지 기능을 통해 길 찾기 서비스를 제공한다.

첫째, ‘도착지 자동 지정’은 지정된 출발지에서 가장 가까운 충전소를 도착지로 자동으로 지정하여 경로를 안내하는 기능이다. 출발지와 도착지가 지정되면 Naver Map API를 통해 ‘교통 상황을 분석하여 가장 빠르게 갈 수 있는 길’을 가장 최적의 경로로 폴리 라인으로 표시한다. 또한, [그림 Ⅴ-2]와 같이 좌측의 ‘내비게이션 바’를 통해 출발지의 주소, 도착지의 주소, 거리, 소요 시간 정보를 사용자에게 제공한다. 

둘째, ‘충전소 카테고리 선택’은 기존의 충전소와 새롭게 선정된 수익 보장 지역과 소외지역 충전소를 선택할 수 있는 기능이다. [그림 Ⅴ-3]에서 보듯 오른쪽 위의 ‘메뉴 바’를 통해 사용자가 원하는 카테고리를 선택할 수 있다. 예를 들어, 사용자가 소외 지역을 고려한 충전소를 찾아가고 싶다면 ‘메뉴 바’에서 ‘소외 지역 충전소 경로 탐색’ 버튼을 먼저 클릭한 후 출발지를 지정하면, 출발지에서 가장 가까운 충전소까지의 경로를 탐색해 준다.

셋째, ‘당일 충전 요금 및 대기 시간 정보 제공’ 기능은 [그림 Ⅴ-3] <지도상의 메뉴 바>의 하단에 표현된 당일 충전소의 충전 요금과 충전 시 예상 대기 시간을 표시해준다. 수소충전소는 충전 요금에 변동이 생기며, 충전소에서 대기하고 있는 차량 대수에 따라서도 충전 시간이 변동된다. 따라서, 사용자가 효율적으로 충전을 할 수 있도록 웹에서 당일 수소 충전 가격과 대기 시간을 안내한다.

![image19](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image19.png?raw=true){: width="400"}
*[그림 Ⅴ-3] 지도상의 내비게이션 바 (출발지 및 도착지 주소, 거리 및 소요시간)*

![image20](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image20.png?raw=true){: width="400"}
*[그림 Ⅴ-4] 지도상의 메뉴 바(충전소 카테고리 버튼, 당일 충전소 요금 및 충전 시간)*

### 웹 사이트 구현방법 (Python + HTML)

#### Flask

플라스크(Flask)는 Python으로 작성된 마이크로 프레임워크(Framework)이다. 플라스크에는 데이터베이스 추상화 계층, 양식 유효성 확인, 기타 기존의 서드파티 라이브러리가 공통 기능을 제공하는 구성 요소는 없지만, 플라스크 자체에서 구현된 것처럼 애플리케이션 기능을 추가할 수 있는 확장 기능을 지원한다. 확장 기능은 객체 관계 매퍼, 양식 유효성 확인, 업로드 관리, 다양한 개방형 인증 기술, 여러 공통 프레임워크 관련 도구들을 위해 존재한다. 확장 기능은 코어 플라스크 프로그램과 비교했을 때 훨씬 더 정기적으로 업데이트된다.

플라스크는 본 프로젝트 웹 구축에서 Python 파일과 HTML 파일을 연결해주기 위해 사용된 매우 중요한 라이브러리이다. 웹에서 기능 구현을 위하여 여러 개의 Python 파일을 HTML에 한 번에 묶어주기 위하여 사용되었다.

![image21](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image21.png?raw=true){: width="800"}
*[그림 V-5] Flask 구현 코드*

#### requests

HTTP(Hyper Text Transfer Protocol)는 Hyper Text형식으로 주고받는 Protocol이다. ‘통신 규약’인 Transfer Protocol은 주고받는 형식이나 양식을 의미한다. 예를 들어, 통신 규약의 이름이 ‘편지 프로토콜’이고, 프로토콜이 ‘수신자’, ‘내용’, ‘발신인’을 기본적으로 갖고 있다고 가정하면, ‘편지 프로토콜’로 주고받는 데이터는 모두 ‘수신자’, ‘내용’, ‘발신인’을 가지고 있다. 다른 예로 HTML의 경우 body, head, method 등이 있다.

requests는 요청코드이다. 웹 구현에서 Naver Map API에서 출발지, 도착지를 입력해 나오는 경로, 경로마다의 위도와 경도 리스트, 경로의 거리, 이동시간 등을 요청하기 위해 사용되었다.

![image22](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image22.png?raw=true){: width="800"}
*[그림 V-6] requests 구현 코드*

#### Geopy, Pandas, Csv

Geopy는 주소나 특정 위치 명을 입력하여 위도, 경도, 상세주소를 얻는 Geocoding을 할 수 있도록 도와주는 라이브러리이다. 지도에서 충전소의 입지를 직관적으로 보여주는 것은 마커이다. 이를 위해 해당 지역의 위도, 경도 데이터가 필요하다. 이 기능을 구현하기 위하여 Geopy 라이브러리를 사용하였다.

Pandas는 쉽고 직관적인 관계형 또는 분류된 데이터로 작업할 수 있도록 설계된 빠르고 유연하며 표현이 풍부한 데이터 구조를 제공하는 Python 패키지이다. Python에서 실용적인 실제 데이터 분석을 수행하기 위한 고수준의 객체 형태를 목표로 한다. 또한, 어떤 언어로도 사용할 수 있는 가장 강력하고 유연한 오픈 소스 데이터 분석 혹은 조직 도구가 되는 더 넓은 목표를 가진다. Pandas를 이용하여 기존 충전소의 주소, 충전소 명 등으로 이루어진 csv파일을 불러와 Python에서 데이터프레임의 형식으로 사용할 수 있게 하였다.

Csv는 작성된 CSV파일을 유지하면서, 해당 파일을 수정할 수 있도록 도와주는 라이브러리이다. 기존 충전소·수익 보장 지역 고려 충전소 입지·소외 지역 고려 충전소 입지의 위도·경도데이터 파일의 확장자는 csv 파일이다. 이 파일을 Python에서 사용하기 위해서 해당 라이브러리를 사용하였다.

#### Haversine

Haversine은 구에서 호의 길이를 구하는 Haversine 공식을 이용하여 두 지점의 위치에서 거리를 확인 가능하게 만든 내장 라이브러리이다. 사용자가 도착지를 지정하면 웹에서는 자동으로 가장 가까운 거리의 충전소를 지정한다. 이 때, 지정 기준은 직선거리가 가장 짧은 충전소이다.

#### Googlemaps API

Google maps API에서 제공하는 라이브러리로 개인 API키를 발급받아 사용할 수 있으며, 주소 정보 이외에도 다양한 함수를 포함하고 있어 유용하지만 개인 API키의 사용 제한과 요금이 있기에 배포 전 확인이 필요하다. 웹에서는 출발지와 목적지의 정확한 주소명을 출력해준다. 출발지 설정 시, 사용자는 지정한 출발지가 맞는지 정확한 주소지명 확인 및 위치 파악이 가능하다. googlemaps라는 라이브러리를 사용하여 이전의 geopy에서 사용한 geocoding과는 반대로 reverse-geocoding을 사용하여 출발지와 도착지의 위도, 경도를 받아와 해당 위치의 주소를 사용자에게 보여주어 편의성을 제공하였다.

#### Naver maps API

NAVER 지도 API V3는 JavaScript 형태의 NAVER 지도 플랫폼으로, 웹 서비스 또는 애플리케이션에 지도 기능을 구현할 수 있도록 다양한 클래스와 메서드를 제공한다. NAVER 지도 API V3는 높은 성능을 위해 데스크톱과 모바일 환경에 최적화된 코드를 제공하고 있으며, 주요 웹 브라우저를 완벽하게 지원할 수 있도록 새롭게 만들었다. Naver Cloud Platform에서 제공하는 Naver Maps API로 지도 생성, 마커 표현, 폴리라인 표현, 정보 창 표시, 거리 및 시간 표현 등으로 기존의 네이버 지도와 같은 웹 서비스를 이용했던 경험이 있다면 쉽게 사용할 수 있도록 설계하였다.

## 결론 및 제언

본 프로젝트에서는 그린 모빌리티 확대를 위해 수소차 인프라를 구축하는 방안으로 수충전소의 입지를 선정하고 데이터를 분석하여 웹으로 서비스하였다. 모델의 예측 정확도를 파악하기 위해 현재 운영하고 있는 13개의 수소차 충전소의 위치와 데이터 분석을 통해 선정된 신규 수익 보장 충전소의 위치를 비교한 결과, 수익 보장 충전소 45개 중 9개의 충전소가 인근에 있는 것을 확인했다. 즉, 신규 수익성 모델 대비 현존 충전소는 20%의 확률로 일치하였다. 다만, 현재 운영되고 있는 수소차 충전소의 개수가 13개라는 점에 비추어본다면, 그 중 9개의 충전소의 입지를 예측하여 기존 충전소 대비 69%의 확률로 일치하였다고 간주할 수 있다.

![image23](https://github.com/ktb5891/ktb5891.github.io/blob/main/img/WITH/image23.png?raw=true){: width="800"}
*[그림 Ⅵ-1] 기존 충전소와 수익 보장 지역 충전소 비교*

한편, 본 프로젝트는 공시지가, 총 인구수, 1일 자동차 평균 주행거리, 수소차 보급대수 데이터만을 활용하여 분석을 시행하였다. 그러나 이러한 변수 이외에도 인건비, 소비자 이용량 등 영향을 미치는 변수가 있어 이윤 도출에 있어서 오차가 존재할 수 있다. 또한, 데이터 수집의 한계로 도로 통행량 등의 고려하지 못한 변수가 존재한다는 한계가 있기 떄문에 변수를 추가하여 후속 프로젝트로 발전 할 수 있다.

현재 경기도는 ‘2020년 수소 활성화 도시로의 발전 정책’ 추진하고 있는바, 본 프로젝트를 통해 경기 담당 행정청의 수소 사업을 활성화하고 경기도민에게 수소차에 대한 장벽을 낮춰 지역 수소 사업 활성화에 이바지할 수 있다. 또한, 다음과 같은 효과를 기대할 수 있다.

첫째, 수소차 충전소 입지 선정을 통해 수소차를 상용화한다면 그린 경제 선두국으로 글로벌 가치 사슬(GVC)에서 규모의 경제를 실현할 수 있다. 증가하는 그린 에너지 수요에 발맞춰 수소차 충전 인프라를 구축하여 보급을 활성화하고, 수소차 보급 1위 국가의 위상을 유지한다면 수소 모빌리티 산업에서의 선점 효과를 기대할 수 있다. 덧붙여 현재 수소차량 보유 현황이 1위인 대한민국은 신재생에너지 활용 국가들에게 좋은 표본이 될 수 있으며, 국가 경쟁력도 상승할 것으로 예상할 수 있다.

둘째, 본 프로젝트의 입지 선정 알고리즘을 통해 적재적소에 충전소를 건설한다면 건축 비용을 절감할 수 있고, 수소 충전소 인프라 구축 및 유지를 위한 인력을 양성할 수 있다. 수소 충전소의 특성상 무인 충전이 불가능하고, 안전 교육을 받은 전문 직원들이 관리해야 한다. 수소 인프라 구축을 통해 전문적인 관리 인력을 육성하여, 고용의 전문성과 지속성을 확보할 수 있다. 또한, 수소차 충전소 구축 후 관련 웹, 애플리케이션 서비스를 제공할 때, 서비스 사용 보장, 기술 보장, 유지보수 등 다방면 인력 시장에서의 고용창출이 예상된다. 실제로 글로벌 33개국이 참가하고 있는 수소 위원회에서 2050년 글로벌 수소 경제에서 2.5조 달러의 시장 가치와 3,000만개 일자리를 창출할 전망이라고 예측한 바 있다.

셋째, 수소차를 상용화하고, 국민의 편의를 도모할 수 있다. 수소 충전소를 적재적소에 배치해 수소 차량 이용자들이 겪는 불편함을 해소하는 것은 그린 모빌리티 활성화를 위해 필수적이다. 올해 5월 기준 수소 차량의 지역별 등록현황에 따르면, 경기(2,372대), 울산(2,046대), 서울(2,014대) 순으로 등록되어있으나, 2,000대가 넘는 차량이 등록된 지역들의 충전소 개수는 경기(6개), 울산(7개), 서울(4개)뿐이다. WITH을 이용하여 수소차 충전소를 빠르게 구축한다면, 수소차 이용객들의 편의를 도모할 수 있으며, 인프라 부족 때문에 수소 차량 구매를 망설인 잠재 고객을 확보하여 그린 모빌리티를 활성화할 수 있다.


## 참고 문헌

- 강철구, 빈미영, 전소영. “경기도의 수소차 보급 활성화를 위한 충전인프라 구축방안 연구.” 정책연구 . (2019): 1-166.
- 강현준, 이준태, 김천석. (2016) “에너지 신산업 기술동향 및 전력분야 비니지스 모델 연구.” 한국전자통신학회논문지, 11(8), 773-782.
- 김거중, 박준식 and 고승렬. (2019). 하이브리드형 수소공급방식을 고려한 수소충전소 입지 선정 모형 개발. 교통연구, 26(2), 53-70.
- 김경현, 구윤모. "교통량 데이터를 활용한 전기차 충전소 위치 최적화 방안 연구." 한국혁신학회지 15.4 (2020): 61-91.
- 김수환, 류준형. (2020). 수소 충전소 최적 위치 선정을 위한 기계 학습 기반 방법론. Korean Chem.Eng.Res.(화학공학), 58(4), 573-580.
- 장홍석. "빅데이터 분석을 통한 전기차 충전소 최적입지 선정 방안." 대한산업공학회 춘계공동학술대회 논문집 . (2019): 1301-1329.
- 한진석. "서울시 전기차 충전인프라 설치 방안 연구." 서울도시연구 19.3 (2018): 131-147.
